# 🤖 AI 悬浮助手插件

基于智谱 AI 的桌面悬浮助手浏览器插件，提供智能对话、翻译和多轮对话记忆功能。

## ✨ 主要功能

### 🎯 智能对话
- 基于智谱 AI 的智能对话系统
- 支持多轮对话，具备上下文记忆能力
- 流式响应，实时显示 AI 回复

### 🌐 智能翻译
- 选中任意文本，右键菜单快速翻译
- 自动在侧边栏打开并显示翻译结果
- 支持多种语言互译

### 🌤️ 天气预报
- 智能识别天气查询请求
- 支持全国主要城市天气查询
- 显示7天天气预报信息
- 集成墨迹天气15日预报API
- 美观的天气卡片展示
- 支持今日、明日、一周天气查询

### 💾 对话记忆
- 自动保存对话历史记录
- 支持跨会话保持对话上下文
- 一键清除对话记录功能

### ⌨️ 快捷操作
- **Ctrl+Shift+L**：切换侧边栏显示/隐藏
- 点击插件图标打开侧边栏
- 右键菜单快速翻译选中文本

## 🚀 安装使用

### 开发模式安装
1. 下载或克隆本插件代码
2. 打开 Chrome 浏览器，输入 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择插件所在的文件夹

### 基本使用
1. **打开侧边栏**：
   - 按 `Ctrl+Shift+L` 快捷键
   - 或点击浏览器工具栏的插件图标

2. **开始对话**：
   - 在侧边栏输入框中输入问题
   - 按回车键发送消息
   - 等待 AI 回复

3. **翻译文本**：
   - 在网页上选中要翻译的文本
   - 右键点击选择"使用 AI 翻译"
   - 侧边栏会自动打开并显示翻译结果

4. **查询天气**：
   - 在对话框中输入天气相关问题
   - 例如："北京天气怎么样？"、"明天上海会下雨吗？"
   - 支持全国主要城市天气查询
   - 显示7天天气预报信息
   - 集成墨迹天气15日预报API
   - 美观的天气卡片展示
   - 支持今日、明日、一周天气查询

6. **清除记录**：
   - 点击侧边栏标题栏的垃圾桶图标 🗑️
   - 确认清除后，所有对话记录将被删除

## ⚙️ 配置说明

### API 密钥设置
1. 打开插件侧边栏
2. 点击右上角的设置图标 ⚙️
3. 输入您的智谱 AI API 密钥
4. 点击保存即可开始使用

### 快捷键自定义
1. 打开 Chrome 扩展管理页面 `chrome://extensions/`
2. 点击左上角的"汉堡菜单"→"键盘快捷键"
3. 找到"AI 悬浮助手插件"
4. 点击编辑按钮修改快捷键

## 🛠️ 技术特性

- **Manifest V3**：采用最新的 Chrome 扩展标准
- **响应式设计**：适配不同屏幕尺寸
- **本地存储**：使用 Chrome Storage API 保存数据
- **流式处理**：支持 AI 回复的实时流式显示
- **状态管理**：智能跟踪侧边栏开关状态

## 📁 文件结构

```
ai-floating-assistant/
├── manifest.json          # 插件配置文件
├── background.js          # 后台脚本
├── popup.html            # 弹出窗口界面
├── popup.js              # 弹出窗口逻辑
├── sidepanel.html        # 侧边栏界面
├── sidepanel.js          # 侧边栏逻辑
├── styles.css            # 样式文件
├── icon16.png            # 16x16 图标
├── icon48.png            # 48x48 图标
├── icon128.png           # 128x128 图标
└── README.md             # 项目说明文档
```

## 🔧 开发说明

### 主要 API
- `chrome.sidePanel`：侧边栏管理
- `chrome.contextMenus`：右键菜单
- `chrome.commands`：快捷键处理
- `chrome.storage`：本地存储

### 核心功能模块
- **AI对话引擎**：集成OpenAI API，支持流式响应
- **智能翻译识别**：自动检测翻译需求并处理
- **天气查询**：智能识别天气请求并获取预报数据
- **上下文管理**：维护多轮对话历史
- **本地存储**：使用Chrome Storage API保存数据
- **响应式设计**：适配不同屏幕尺寸
- **快捷键支持**：Ctrl+Shift+L 快速切换侧边栏

## 📝 注意事项

- 需要有效的智谱 AI API 密钥才能正常使用
- 插件需要相应的浏览器权限（存储、侧边栏等）
- 对话记录保存在本地，清除浏览器数据会同时清除记录
- 天气查询功能基于第三方API，可能存在访问限制
- 天气数据仅供参考，实际天气情况请以官方发布为准
- 天气查询功能基于第三方 API，可能存在访问限制
- 天气数据仅供参考，实际天气情况请以官方发布为准

## 🤝 贡献支持

如果您在使用过程中遇到问题或有改进建议，欢迎通过以下方式反馈：
- 提交 Issue
- 发送功能请求
- 贡献代码改进

---

**享受您的 AI 助手体验！** 🎉